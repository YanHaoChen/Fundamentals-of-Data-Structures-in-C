# 數值交換：使用兩個變數

近期聽去面試研發替代役的學長提到，某公司出題「數值交換，但只能用兩個變數」。當時對 C 並不熟悉，覺得出的題目很難，不太知道怎麼解題。但在大致了解指標後，就有了解決的靈感。方法就是使用指標：

## 不嚴謹的方式

### 準備基本要素：兩個指標變數

```c
int main(){
	int *a,*b;
	a = (int*)malloc(sizeof(int));
	b = (int*)malloc(sizeof(int));
	*a = 10;
	*b = 20;

	swap(a,b);
	printf("a:%d,b:%d",*a,*b);
	
return 0;
}
```
### 關鍵：swap function

只使用兩個變數就要交換數值，是一件很弔詭的事情，因為會少了一個暫存用的```temp```變數。但有了指標，這就可以是一件簡單的事情。我的方式，是直接利用```b```變數「後面的第二個未知空間」來當作一般在寫數值交換時，使用的```temp```變數。

> 至於是後第幾個未知空間，就不是重點，只要不要蓋掉```a```的數值，就是好空間！

```c
void swap(int *a,int *b){
	*(b+2)= *a;
	*a = *b;
	*b = *(b+2);
}
```

結果如下：

```shell
$ ./swap_with_2_var.o
a:20,b:10
```
成功交換囉！

## 嚴謹的方式

就是多給一個變數空間給變數```b```，用那個空間當作暫存，這樣也就不會有存取到已使用的記憶體空間的問題了！

```c
void swap(int *a,int *b){
	b[1]= *a;
	*a = b[0];
	b[0] = b[1];
}

int main(){
	int *a,*b;
	a = (int*)malloc(sizeof(int));
	b = (int*)malloc(sizeof(int)*2);
	*a = 10;
	b[0] = 20;

	swap(a,&b[0]);
	printf("a:%d,b:%d",*a,b[0]);
	
return 0;
}
```